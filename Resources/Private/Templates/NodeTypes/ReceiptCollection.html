{namespace neos=TYPO3\Neos\ViewHelpers}
{namespace ts=TYPO3\TypoScript\ViewHelpers}
{namespace media=TYPO3\Media\ViewHelpers}
{namespace typo3cr=TYPO3\TYPO3CR\ViewHelpers}
{namespace fv=FreeVeggie\Blog\ViewHelpers}

<div{attributes -> f:format.raw()}>

    <f:if condition="{items}">
        <f:then>
        <typo3cr:widget.paginate widgetId="posts-paginator" nodes="{items}" as="paginatedNodes" configuration="{itemsPerPage: itemsPerPage}">
            <ul class="fv-receiptcollection">
                <f:for each="{paginatedNodes}" as="nodeItem">
                    <li class="fv-receiptbox">
                        <neos:link.node node="{nodeItem}">
                            <div class="fv-receiptimage"{f:if(condition:nodeItem.properties.headerImage, then:' style="background-image:url({media:uri.image(image:nodeItem.properties.headerImage)});"')}></div>
                            <h3 class="fv-receipttitle">{nodeItem.label}</h3>
                            <p class="fv-receiptteaser">
                                <f:if condition="{nodeItem.properties.teaser}">
                                    <f:then>
                                        {nodeItem.properties.teaser}
                                    </f:then>
                                    <f:else>
                                        <fv:teaser node="{nodeItem}" maxTextLength="150" />
                                    </f:else>
                                </f:if>

                            </p>
                        </neos:link.node>
                    </li>
                </f:for>
            </ul>
        </typo3cr:widget.paginate>
        </f:then>
    </f:if>

</div>
